---
description: Rails 8 specific rules and guidelines for the this project. These rules complement the main .cursorrules file with detailed Rails-specific practices.
globs:
  [
    "*.rb",
    "*.erb",
    "*.rake",
    "Gemfile",
    "Rakefile",
    "config/**/*.yml",
    "config/**/*.rb",
    "db/migrate/*.rb",
    "app/**/*",
  ]
alwaysApply: true
---

# Rails 6.1.4 Development Guidelines

## 1. Rails 6.1.4 Core Features

** Prefer the command line utilities to manually generated code **

e.g use `rails generate model` instead of creating a model from scratch

** IMPORTANT: Server Management **

- Check logs after every significant change
- Monitor development.log for errors and performance issues
- Use `tail -f log/development.log` for real-time monitoring
- Review logs before considering any change complete

1. **Modern Infrastructure**
   - Use Docker for local development
   - Configure proper environment variables
   - Use Figaro for environment management
   - Implement proper logging strategies

2. **Database Best Practices**

   - Use MySQL for development, test, and production environments
   - Configure proper database settings in database.yml
   - Use proper database indexing strategies
   - Configure connection pooling
   - Implement proper backup strategies
   - Monitor and optimize query performance

3. **Controller Patterns**
   - Implement rate limiting via cache store
   - Use the new sessions generator for authentication
   - Silence healthcheck requests in production
   - Keep controllers RESTful and focused
   - Use service objects for complex business logic

## 2. Development Standards

1. **Code Organization**

   - Follow Single Responsibility Principle
   - Use service objects for complex business logic
   - Keep controllers skinny
   - Use concerns for shared functionality
   - Follow Rails 6.1.4 conventions

2. **Performance**

   - Implement proper caching with Solid Cache
   - Configure connection pooling
   - Use Solid Queue for background jobs
   - Monitor application metrics
   - Regular performance profiling
   - Optimize database queries
   - Use proper indexing strategies

3. **Testing**

   - Write comprehensive Minitest tests
   - Use fixtures instead of factories
   - Use Capybara for integration/system tests
   - Test happy and edge cases
   - Keep tests DRY but readable
   - Use parallel testing by default
   - Regular security testing
   - Performance testing
   - Load testing for critical paths
   - Emphasize writing model, controller, and integration tests (not system tests) for Ruby code
   - For Vite-related JavaScript, write npm-based tests (e.g., using Jest, Vitest, or similar)

4. **Deployment**
   - Use Capistrano for deployment orchestration


## 3. Directory Structure

```
/app
├── controllers/    # Controllers
├── models/         # Active Record models
├── views/          # View templates
├── helpers/        # View helpers
├── javascript/     # JavaScriptj
│   ├── controllers/
├── services/       # Service objects
├── policies/       # Pundit policies
├── jobs/          # Background jobs
├── mailers/       # Action Mailer classes
└── assets/        # Assets (if not using importmap)
```

## 4. Tech Stack

- **Backend**: Ruby on Rails 6.1.4
- **Frontend**: JavaScript, jQuery, Webpacker
- **Database**: MySQL (development, test, production)
- **Testing**: Minitest, Capybara, fixtures
- **Background Jobs**: ActiveJob (Rails 6.1.4 default)
- **Caching**: Rails.cache (Rails 6.1.4 default)
- **Real-time**: ActionCable
- **Authentication**: Devise
- **Asset Pipeline**: Webpacker 5.0
- **Container**: Docker (local development and deployment)
- **Deployment**: Capistrano with Passenger
- **File Storage**: Paperclip with Imgur
- **Admin Interface**: Administrate

## 5. Rails-Specific Reminders

1. **Docker Usage**: Use Docker for local development and deployment orchestration
2. **Environment Management**: Use Figaro for environment variables
3. **File Storage**: Use Paperclip with Imgur for image handling
4. **Admin Interface**: Use Administrate for admin panels
5. **Authentication**: Use Devise for user authentication
6. **Deployment**: Use Capistrano with Passenger for production deployment
7. **Asset Pipeline**: Use Webpacker for JavaScript and CSS compilation
8. **Database**: Use MySQL for all environments
9. **Testing**: Use Minitest with Capybara for integration tests
10. **Monitoring**: Use Rollbar for error tracking and monitoring

## 6. Project-Specific Guidelines

### **Saans Studio Portfolio Application**

1. **Models Structure**
   - `About` - Company information
   - `AboutPhoto` - About page images
   - `Photo` - General photo management
   - `Portfolio` - Portfolio projects
   - `PortfolioDetail` - Portfolio project details
   - `Skill` - Skills/technologies
   - `Slider` - Homepage slider images
   - `User` - Admin users

2. **Admin Interface**
   - Use Administrate for admin panels
   - Customize dashboards for each model
   - Use Paperclip fields for file uploads
   - Implement proper authorization

3. **File Management**
   - Use Paperclip for file attachments
   - Integrate with Imgur for image hosting
   - Use ImgBB as backup image service
   - Implement proper image optimization

4. **Deployment Strategy**
   - Use Docker for development environment
   - Use Capistrano for production deployment
   - Configure Passenger for production server
   - Use environment variables for configuration

5. **Development Workflow**
   - Use Docker Compose for local development
   - Use SSH key copying for deployment
   - Monitor logs with `docker-compose logs`
   - Use development environment for testing
